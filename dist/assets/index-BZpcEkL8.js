(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))g(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&g(s)}).observe(document,{childList:!0,subtree:!0});function p(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function g(t){if(t.ep)return;t.ep=!0;const o=p(t);fetch(t.href,o)}})();class C{constructor(n,p=1e3){this.container=document.querySelector(n),this.container&&(this.slider=this.container.querySelector(".slider"),this.subslide=this.slider.querySelector(".subslide"),this.slides=this.slider.querySelectorAll(".slide"),this.leftControl=this.container.querySelector(".arrow-left"),this.rightControl=this.container.querySelector(".arrow-right"),this.pause=p,this.currentIndex=1,this.isTransitioning=!1,this.interval=null,this.totalSlides=this.slides.length,this.totalSlides>0&&this.init())}init(){this.cloneSlides(),this.addEventListeners(),this.startSlider()}cloneSlides(){this.subslide.prepend(this.slides[this.totalSlides-1].cloneNode(!0)),this.subslide.appendChild(this.slides[0].cloneNode(!0)),this.slides=this.slider.querySelectorAll(".slide"),this.subslide.style.transform=`translateX(${-100*this.currentIndex}%)`}addEventListeners(){this.leftControl.addEventListener("click",()=>this.prevSlide()),this.rightControl.addEventListener("click",()=>this.nextSlide()),this.subslide.addEventListener("transitionend",()=>{this.isTransitioning=!1,this.handleInfiniteLoop()}),this.container.addEventListener("mouseenter",()=>this.stopSlider()),this.container.addEventListener("mouseleave",()=>this.startSlider())}handleInfiniteLoop(){this.currentIndex===0&&(this.subslide.style.transition="none",this.currentIndex=this.totalSlides,this.subslide.style.transform=`translateX(${-100*this.currentIndex}%)`),this.currentIndex===this.slides.length-1&&(this.subslide.style.transition="none",this.currentIndex=1,this.subslide.style.transform=`translateX(${-100*this.currentIndex}%)`)}goToSlide(n){this.isTransitioning||(this.isTransitioning=!0,this.subslide.offsetWidth,this.subslide.style.transition="transform 0.5s ease-in-out",this.subslide.style.transform=`translateX(${-100*n}%)`,this.currentIndex=n)}nextSlide(){this.goToSlide(this.currentIndex+1),this.resetTimer()}prevSlide(){this.goToSlide(this.currentIndex-1),this.resetTimer()}startSlider(){this.interval||(this.interval=setInterval(()=>this.nextSlide(),this.pause))}stopSlider(){clearInterval(this.interval),this.interval=null}resetTimer(){this.stopSlider(),this.startSlider()}}document.addEventListener("DOMContentLoaded",async()=>{const r=document.querySelector(".hamburger"),n=document.querySelector(".nav-mobile"),p=document.querySelectorAll(".nav-mobile a"),g=()=>{n.classList.add("nav-mobile--open"),r.classList.add("hamburger--open"),r.setAttribute("aria-expanded","true"),n.removeAttribute("aria-hidden")},t=()=>{n.classList.remove("nav-mobile--open"),r.classList.remove("hamburger--open"),r.setAttribute("aria-expanded","false"),n.setAttribute("aria-hidden","true")};r.addEventListener("click",()=>{r.classList.contains("hamburger--open")?t():g()}),p.forEach(a=>{a.addEventListener("click",()=>t())}),new C(".hero-slider",5e3);async function o(){try{const a=await fetch("/products.json");if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){return console.error("Could not load products:",a),[]}}const s=await o(),h=document.querySelector(".product-grid");if(h&&s.length>0){const a=document.getElementById("product-search-input"),w=document.getElementById("search-button"),b=document.querySelectorAll(".filter-btn"),d=document.getElementById("load-more-btn");let S=9,u=0;const m=i=>{if(h.innerHTML="",i.length===0){h.innerHTML="<p>No products found matching your criteria.</p>";return}i.forEach(e=>{const l=document.createElement("article");l.className="product-card",l.innerHTML=`
                <figure class="product-image-wrapper">
                    <img  src="${e.image}" alt="${e.name}" class="product-image">
                </figure>
                <div class="product-content">
                    <p class="product-category">${e.category}</p>
                    <h3 class="product-name">${e.name}</h3>
                    <p class="product-desc">${e.description}</p>
                    <div class="product-rating" aria-label="Rating: ${e.rating} out of 5 stars">
                        <span>${"★".repeat(Math.round(e.rating))}${"☆".repeat(5-Math.round(e.rating))}</span>
                        <span>(${e.rating}/5)</span>
                    </div>
                    <a href="${e.link}" class="btn-secondary" target="_blank" aria-label="Check price for ${e.name}">Check Price</a>
                </div>
            `,h.appendChild(l)})},E=()=>{d.style.display="none";const i=a.value.trim().toLowerCase(),e=s.filter(l=>l.name.toLowerCase().includes(i)||l.id.toLowerCase().includes(i));m(e)};w.addEventListener("click",E),a.addEventListener("keydown",i=>{i.key==="Enter"&&E()}),b.forEach(i=>{i.addEventListener("click",()=>{const e=i.dataset.category;b.forEach(c=>c.classList.remove("active")),i.classList.add("active");let l;if(e==="All")l=s,d.style.display="block",u=S,m(s.slice(0,u));else if(e==="Recent"){const c=s.slice(-3);d.style.display="none",m(c)}else l=s.filter(c=>c.category===e),d.style.display="none",m(l)})}),d.addEventListener("click",()=>{u+=S;const i=s.slice(0,u);m(i),u>=s.length&&(d.style.display="none")});const I=(()=>{const i=s.filter(c=>c.category==="Home Decor").slice(0,3),e=s.filter(c=>c.category==="Health & Fitness").slice(0,3),l=s.filter(c=>c.category==="Natural Remedies").slice(0,3);return[...i,...e,...l]})();u=I.length,m(I),s.length<=u&&(d.style.display="none")}else h&&(h.innerHTML="<p>Could not load products. Please try again later.</p>")});const k=document.getElementById("view-products-btn"),T=document.getElementById("top_products");k&&T&&k.addEventListener("click",()=>{T.scrollIntoView({behavior:"smooth"})});const L=document.getElementById("filter-toggle-btn"),f=document.querySelector(".collapsible-filters");L&&f&&(L.addEventListener("click",()=>{f.classList.toggle("filters--open")}),document.addEventListener("click",r=>{L.contains(r.target)||f.contains(r.target)||f.classList.remove("filters--open")}));const q=document.querySelectorAll(".filter-btn");q.forEach(r=>{r.addEventListener("click",()=>{f&&f.classList.remove("filters--open")})});const y=document.getElementById("theme-toggle"),v=document.body,$=()=>{localStorage.getItem("theme")==="dark"?(v.classList.add("dark-mode"),y.checked=!0):(v.classList.remove("dark-mode"),y.checked=!1)};$();y.addEventListener("change",()=>{y.checked?(v.classList.add("dark-mode"),localStorage.setItem("theme","dark")):(v.classList.remove("dark-mode"),localStorage.setItem("theme","light"))});
